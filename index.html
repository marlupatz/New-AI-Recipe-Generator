<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Recipe Generator</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f9f4; color: #333; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 700px; width: 100%; text-align: center; }
        h1 { color: #2e7d32; margin-bottom: 10px; }
        p { color: #666; margin-bottom: 20px; }
        .search-box { display: flex; gap: 10px; justify-content: center; }
        input { width: 65%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        button { background: #2e7d32; color: white; border: none; padding: 12px 24px; font-size: 16px; border-radius: 8px; cursor: pointer; }
        button:hover { background: #1b5e20; }
        
        .recipe-output { margin-top: 30px; text-align: left; display: none; background: #fff; }
        .recipe-header { display: flex; align-items: center; gap: 20px; border-bottom: 2px solid #eee; padding-bottom: 20px; margin-bottom: 20px; }
        .recipe-img { width: 150px; height: 150px; object-fit: cover; border-radius: 10px; background: #eee; }
        h2 { color: #2e7d32; margin: 0; }
        h3 { color: #2e7d32; margin-top: 20px; }
        ul, ol { padding-left: 20px; line-height: 1.6; }
        .instructions { white-space: pre-wrap; background: #f9f9f9; padding: 15px; border-radius: 8px; line-height: 1.8; }
        .badge { background: #e8f5e9; color: #2e7d32; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="container">
        <h1>Global & Local Recipe Generator üåç</h1>
        <p>Type any dish name (e.g., Pork Adobo, Carbonara, Tinola)</p>
        
        <div class="search-box">
            <input type="text" id="userInput" placeholder="What are you craving?">
            <button onclick="findRecipe()">Find Recipe</button>
        </div>

        <div id="recipeResult" class="recipe-output">
            <div class="recipe-header">
                <img id="mealImg" class="recipe-img" src="" alt="Dish Image">
                <div>
                    <h2 id="mealTitle"></h2>
                    <span id="sourceBadge" class="badge"></span>
                </div>
            </div>

            <h3>Ingredients:</h3>
            <ul id="ingredientsList"></ul>

            <h3>Instructions:</h3>
            <div id="instructions" class="instructions"></div>
        </div>
    </div>

    <script>
        // --- 1. LOCAL FILIPINO COOKBOOK (Fallback) ---
        const localRecipes = {
            "pork adobo": {
                img: "https://upload.wikimedia.org/wikipedia/commons/c/c9/Adobo_PHP.jpg",
                ingredients: ["500g Pork Belly (cubed)", "1/2 cup Soy Sauce", "1/3 cup Vinegar", "1 head Garlic (minced)", "1 tsp Peppercorns", "2 Bay Leaves", "1 cup Water"],
                instructions: "1. Combine pork, soy sauce, and garlic in a pot. Marinate for 30 mins.\n2. Add water, vinegar, bay leaves, and peppercorns.\n3. Boil without stirring for 5 minutes.\n4. Cover and simmer for 45 minutes until tender.\n5. Uncover and simmer until sauce thickens and oil comes out.\n6. Serve hot with rice."
            },
            "tinola": {
                img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Tinolang_Manok_%28Philippines%29.jpg/640px-Tinolang_Manok_%28Philippines%29.jpg",
                ingredients: ["1 Whole Chicken (cut up)", "1 Green Papaya or Sayote (sliced)", "1 cup Chili Leaves or Malunggay", "1 thumb Ginger (sliced)", "1 Onion & 2 cloves Garlic", "Fish Sauce (Patis)"],
                instructions: "1. Saut√© garlic, onion, and ginger until fragrant.\n2. Add chicken and cook until it turns white.\n3. Add fish sauce and water. Simmer for 20 minutes.\n4. Add papaya/sayote and cook for 5 more minutes.\n5. Add greens (malunggay) and turn off heat.\n6. Serve hot."
            },
            "sinigang": {
                img: "https://upload.wikimedia.org/wikipedia/commons/f/f0/Sinigang_na_Baboy.jpg",
                ingredients: ["500g Pork Ribs", "1 pack Tamarind Mix", "1 Radish & 1 Eggplant", "1 bundle Kangkong", "2 Tomatoes & 1 Onion", "Green Chili (Siling Haba)"],
                instructions: "1. Boil pork, tomatoes, and onions in water until tender.\n2. Add tamarind mix to taste.\n3. Add radish and eggplant. Simmer 5 mins.\n4. Add kangkong and green chili.\n5. Turn off heat and serve."
            }
        };

        async function findRecipe() {
            const input = document.getElementById('userInput').value.trim().toLowerCase();
            const resultBox = document.getElementById('recipeResult');
            
            if (!input) { alert("Please type a dish name!"); return; }

            // Hide previous results
            resultBox.style.display = "none";

            // --- STRATEGY 1: CHECK LOCAL COOKBOOK FIRST ---
            if (localRecipes[input]) {
                showLocalRecipe(input, localRecipes[input]);
                return;
            }

            // --- STRATEGY 2: SEARCH INTERNET (TheMealDB) ---
            try {
                const response = await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${input}`);
                const data = await response.json();

                if (data.meals) {
                    showOnlineRecipe(data.meals[0]);
                } else {
                    alert("Sorry, I couldn't find that recipe online or in my local book! Try 'Chicken' or 'Pork Adobo'.");
                }
            } catch (error) {
                alert("Internet error. Please check your connection.");
            }
        }

        function showLocalRecipe(name, data) {
            document.getElementById('mealTitle').innerText = name.toUpperCase(); // Title case
            document.getElementById('mealImg').src = data.img;
            document.getElementById('sourceBadge').innerText = "From Local Cookbook";
            document.getElementById('instructions').innerText = data.instructions;

            const list = document.getElementById('ingredientsList');
            list.innerHTML = "";
            data.ingredients.forEach(ing => {
                let li = document.createElement('li');
                li.innerText = ing;
                list.appendChild(li);
            });

            document.getElementById('recipeResult').style.display = "block";
        }

        function showOnlineRecipe(meal) {
            document.getElementById('mealTitle').innerText = meal.strMeal;
            document.getElementById('mealImg').src = meal.strMealThumb;
            document.getElementById('sourceBadge').innerText = "From Online Database";
            document.getElementById('instructions').innerText = meal.strInstructions;

            const list = document.getElementById('ingredientsList');
            list.innerHTML = "";
            
            for (let i = 1; i <= 20; i++) {
                let ingredient = meal[`strIngredient${i}`];
                let measure = meal[`strMeasure${i}`];
                if (ingredient && ingredient.trim() !== "") {
                    let li = document.createElement('li');
                    li.innerText = `${measure} ${ingredient}`;
                    list.appendChild(li);
                }
            }

            document.getElementById('recipeResult').style.display = "block";
        }
    </script>

</body>
</html>