<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Recipe Generator</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f9f4; color: #333; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 700px; width: 100%; text-align: center; }
        h1 { color: #2e7d32; margin-bottom: 10px; }
        p { color: #666; margin-bottom: 20px; }
        .search-box { display: flex; gap: 10px; justify-content: center; }
        input { width: 65%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        button { background: #2e7d32; color: white; border: none; padding: 12px 24px; font-size: 16px; border-radius: 8px; cursor: pointer; }
        button:hover { background: #1b5e20; }
        
        .recipe-output { margin-top: 30px; text-align: left; display: none; background: #fff; }
        .recipe-header { display: flex; align-items: center; gap: 20px; border-bottom: 2px solid #eee; padding-bottom: 20px; margin-bottom: 20px; }
        .recipe-img { width: 150px; height: 150px; object-fit: cover; border-radius: 10px; background: #eee; }
        h2 { color: #2e7d32; margin: 0; }
        h3 { color: #2e7d32; margin-top: 20px; }
        ul, ol { padding-left: 20px; line-height: 1.6; }
        .instructions { white-space: pre-wrap; background: #f9f9f9; padding: 15px; border-radius: 8px; line-height: 1.8; }
        .badge { background: #e8f5e9; color: #2e7d32; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        
        /* New Google Button Style */
        .google-btn {
            background-color: #4285F4;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 5px;
            display: inline-block;
            margin-top: 10px;
            font-weight: bold;
        }
        .google-btn:hover { background-color: #357ae8; }
        .not-found-box { text-align: center; padding: 20px; border: 2px dashed #ccc; border-radius: 10px; display: none; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="container">
        <h1>Global & Local Recipe Generator üåç</h1>
        <p>Type any dish name (e.g., Menudo, Burger, Pinangat)</p>
        
        <div class="search-box">
            <input type="text" id="userInput" placeholder="What are you craving?">
            <button onclick="findRecipe()">Find Recipe</button>
        </div>

        <div id="recipeResult" class="recipe-output">
            <div class="recipe-header">
                <img id="mealImg" class="recipe-img" src="" alt="Dish Image">
                <div>
                    <h2 id="mealTitle"></h2>
                    <span id="sourceBadge" class="badge"></span>
                </div>
            </div>
            <h3>Ingredients:</h3>
            <ul id="ingredientsList"></ul>
            <h3>Instructions:</h3>
            <div id="instructions" class="instructions"></div>
        </div>

        <div id="notFoundBox" class="not-found-box">
            <h3>Recipe Not in Database üßê</h3>
            <p>I couldn't find a direct recipe for <strong id="missingDish"></strong> in my system yet.</p>
            <p>But you can find it here:</p>
            <a id="googleLink" class="google-btn" href="#" target="_blank">Search on Google üîé</a>
        </div>
    </div>

    <script>
        // --- LOCAL FAVORITES ---
        const localRecipes = {
            "pork adobo": {
                img: "https://upload.wikimedia.org/wikipedia/commons/c/c9/Adobo_PHP.jpg",
                ingredients: ["500g Pork Belly (cubed)", "1/2 cup Soy Sauce", "1/3 cup Vinegar", "Garlic & Peppercorns", "Bay Leaves", "Water"],
                instructions: "Combine pork, soy sauce, and garlic. Marinate. Add water, vinegar, bay leaves, peppercorns. Simmer 45 mins until tender. Serve hot."
            },
            "menudo": {
                img: "https://upload.wikimedia.org/wikipedia/commons/8/8c/Pork_Menudo_%28Philippines%29.jpg",
                ingredients: ["Pork", "Liver", "Hotdogs", "Potatoes & Carrots", "Tomato Sauce", "Raisins"],
                instructions: "Saut√© garlic/onion. Brown meat. Add liver and hotdogs. Add tomato sauce and water. Simmer. Add veggies and raisins. Cook until tender."
            },
            "sinigang": {
                img: "https://upload.wikimedia.org/wikipedia/commons/f/f0/Sinigang_na_Baboy.jpg",
                ingredients: ["Pork Ribs", "Tamarind Mix", "Radish & Eggplant", "Kangkong", "Tomatoes/Onion", "Green Chili"],
                instructions: "Boil pork with tomatoes/onions. Add tamarind mix. Add radish/eggplant. Simmer. Add leafy greens last. Serve."
            },
            "apritada": {
                img: "https://upload.wikimedia.org/wikipedia/commons/e/ed/Chicken_Afritada.jpg",
                ingredients: ["Chicken/Pork", "Tomato Sauce", "Potatoes & Carrots", "Bell Pepper", "Peas"],
                instructions: "Saut√© aromatics. Brown meat. Add tomato sauce/water. Simmer 20 mins. Add veggies. Cook until soft."
            }
        };

        async function findRecipe() {
            const input = document.getElementById('userInput').value.trim().toLowerCase();
            const resultBox = document.getElementById('recipeResult');
            const notFoundBox = document.getElementById('notFoundBox');
            
            if (!input) { alert("Please type a dish name!"); return; }

            // Reset Display
            resultBox.style.display = "none";
            notFoundBox.style.display = "none";

            // 1. CHECK LOCAL
            if (localRecipes[input]) {
                showLocalRecipe(input, localRecipes[input]);
                return;
            }

            // 2. CHECK INTERNET DATABASE
            try {
                const response = await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${input}`);
                const data = await response.json();

                if (data.meals) {
                    showOnlineRecipe(data.meals[0]);
                } else {
                    // 3. FALLBACK TO GOOGLE
                    showGoogleFallback(input);
                }
            } catch (error) {
                showGoogleFallback(input);
            }
        }

        function showGoogleFallback(dishName) {
            const notFoundBox = document.getElementById('notFoundBox');
            const missingDish = document.getElementById('missingDish');
            const googleLink = document.getElementById('googleLink');

            missingDish.innerText = dishName;
            googleLink.href = `https://www.google.com/search?q=recipe+for+${dishName}`;
            notFoundBox.style.display = "block";
        }

        function showLocalRecipe(name, data) {
            document.getElementById('mealTitle').innerText = name.toUpperCase();
            document.getElementById('mealImg').src = data.img;
            document.getElementById('sourceBadge').innerText = "From Local Cookbook";
            document.getElementById('instructions').innerText = data.instructions;
            
            const list = document.getElementById('ingredientsList');
            list.innerHTML = "";
            data.ingredients.forEach(ing => {
                let li = document.createElement('li');
                li.innerText = ing;
                list.appendChild(li);
            });
            document.getElementById('recipeResult').style.display = "block";
        }

        function showOnlineRecipe(meal) {
            document.getElementById('mealTitle').innerText = meal.strMeal;
            document.getElementById('mealImg').src = meal.strMealThumb;
            document.getElementById('sourceBadge').innerText = "From Online Database";
            document.getElementById('instructions').innerText = meal.strInstructions;

            const list = document.getElementById('ingredientsList');
            list.innerHTML = "";
            for (let i = 1; i <= 20; i++) {
                let ingredient = meal[`strIngredient${i}`];
                let measure = meal[`strMeasure${i}`];
                if (ingredient && ingredient.trim() !== "") {
                    let li = document.createElement('li');
                    li.innerText = `${measure} ${ingredient}`;
                    list.appendChild(li);
                }
            }
            document.getElementById('recipeResult').style.display = "block";
        }
    </script>

</body>
</html>